# ============================================================================
# WIFICORE PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and update with your production values
# NEVER commit .env file to git - it contains sensitive information
# ============================================================================

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
APP_NAME="WifiCore"
APP_ENV=production
APP_DEBUG=false
APP_KEY=base64:GENERATE_WITH_php_artisan_key:generate
APP_URL=https://your-domain.com

# ============================================================================
# TIMEZONE
# ============================================================================
TZ=Africa/Nairobi

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DB_CONNECTION=pgsql
DB_HOST=wificore-postgres
DB_PORT=5432
DB_DATABASE=wificore_production
DB_USERNAME=wificore_user
DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD

# PostgreSQL Performance Settings
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_MAINTENANCE_WORK_MEM=64MB

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_HOST=wificore-redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_MAXMEMORY=512mb

# ============================================================================
# PUSHER/SOKETI WEBSOCKET CONFIGURATION
# ============================================================================
PUSHER_APP_ID=wificore-app-id
PUSHER_APP_KEY=wificore-app-key
PUSHER_APP_SECRET=CHANGE_THIS_PUSHER_SECRET
PUSHER_HOST=your-domain.com
PUSHER_PORT=6071
PUSHER_SCHEME=wss
PUSHER_APP_CLUSTER=mt1

# Soketi Settings
SOKETI_DEBUG=0
SOKETI_METRICS_ENABLED=true
SOKETI_PORT=6071
SOKETI_METRICS_PORT=9670

# ============================================================================
# FREERADIUS CONFIGURATION
# ============================================================================
RADIUS_SERVER_HOST=wificore-freeradius
RADIUS_SERVER_PORT=1812
RADIUS_SECRET=CHANGE_THIS_RADIUS_SECRET
RADIUS_AUTH_PORT=1812
RADIUS_ACCT_PORT=1813

# ============================================================================
# SESSION & SECURITY
# ============================================================================
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_DOMAIN=.your-domain.com
SESSION_SAME_SITE=lax
SESSION_SECURE_COOKIE=true

SANCTUM_STATEFUL_DOMAINS=your-domain.com,www.your-domain.com

# ============================================================================
# CACHE CONFIGURATION
# ============================================================================
CACHE_DRIVER=redis
QUEUE_CONNECTION=database
BROADCAST_DRIVER=pusher

# ============================================================================
# MULTITENANCY CONFIGURATION
# ============================================================================
MULTITENANCY_MODE=schema
AUTO_CREATE_TENANT_SCHEMA=true
AUTO_MIGRATE_TENANT_SCHEMA=true

# ============================================================================
# DATABASE MIGRATION SETTINGS
# ============================================================================
AUTO_MIGRATE=true
AUTO_SEED=false
FRESH_INSTALL=false

# ============================================================================
# VPN CONFIGURATION (Optional)
# ============================================================================
VPN_MODE=host
VPN_INTERFACE=wg0
VPN_SERVER_IP=10.0.0.1
VPN_SERVER_PORT=51820
VPN_SERVER_ENDPOINT=vpn.your-domain.com:51820
VPN_SUBNET_BASE=10.0.0.0/8

# ============================================================================
# MAIL CONFIGURATION
# ============================================================================
MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@your-domain.com
MAIL_FROM_NAME="${APP_NAME}"

# ============================================================================
# SMS CONFIGURATION (Optional)
# ============================================================================
SMS_DRIVER=africastalking
SMS_FROM=WIFICORE
AFRICASTALKING_USERNAME=your_username
AFRICASTALKING_API_KEY=your_api_key

# ============================================================================
# PAYMENT GATEWAY CONFIGURATION (Optional)
# ============================================================================
# M-Pesa
MPESA_CONSUMER_KEY=your_consumer_key
MPESA_CONSUMER_SECRET=your_consumer_secret
MPESA_SHORTCODE=your_shortcode
MPESA_PASSKEY=your_passkey
MPESA_ENVIRONMENT=production

# ============================================================================
# LOGGING
# ============================================================================
LOG_CHANNEL=stack
LOG_LEVEL=error
LOG_DEPRECATIONS_CHANNEL=null
LOG_SLACK_WEBHOOK_URL=

# ============================================================================
# EXTERNAL PORTS (Only services that need external access)
# ============================================================================
NGINX_PORT=8070
# RADIUS ports for network devices (APs, routers)
RADIUS_AUTH_PORT=1812
RADIUS_ACCT_PORT=1813

# ============================================================================
# MONITORING & OBSERVABILITY (Optional)
# ============================================================================
# Sentry Error Tracking
SENTRY_LARAVEL_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.1

# New Relic APM
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_APP_NAME=WifiCore

# ============================================================================
# BACKUP CONFIGURATION (Optional)
# ============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION=s3

# AWS S3 for Backups
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=wificore-backups

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================
# PHP-FPM
PHP_FPM_PM_MAX_CHILDREN=50
PHP_FPM_PM_START_SERVERS=10
PHP_FPM_PM_MIN_SPARE_SERVERS=5
PHP_FPM_PM_MAX_SPARE_SERVERS=20

# Queue Workers
QUEUE_WORKERS=10

# ============================================================================
# FEATURE FLAGS (Optional)
# ============================================================================
FEATURE_VPN_ENABLED=true
FEATURE_SMS_ENABLED=true
FEATURE_MPESA_ENABLED=true
FEATURE_RADIUS_ENABLED=true

# ============================================================================
# API RATE LIMITING
# ============================================================================
API_RATE_LIMIT=60
API_RATE_LIMIT_WINDOW=1

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
CORS_ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# ============================================================================
# NOTES
# ============================================================================
# 1. Generate APP_KEY with: docker exec wificore-backend php artisan key:generate
# 2. Use strong passwords for all credentials
# 3. Enable SSL/TLS in production
# 4. Configure firewall rules to restrict access
# 5. Set up automated backups
# 6. Monitor logs and metrics regularly
# 7. Keep all secrets secure and rotate them periodically
# ============================================================================
