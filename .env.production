# ============================================================================
# WIFICORE PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================================================
# NEVER commit this file to git - it contains sensitive information
# ============================================================================

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
APP_NAME="TraidSolutions (TraidLink)"
APP_ENV=production
APP_DEBUG=false
APP_KEY=base64:fCoFGM8V6G/vaJnPFLhYhQybBlPEMVPWMsCWv1UwkHI=
APP_URL=https://wificore.traidsolutions.com
FRONTEND_URL=https://wificore.traidsolutions.com
API_BASE_URL=https://wificore.traidsolutions.com/api

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

PHP_CLI_SERVER_WORKERS=4

BCRYPT_ROUNDS=12

# ============================================================================
# TIMEZONE
# ============================================================================
TZ=Africa/Nairobi

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DB_CONNECTION=pgsql
DB_HOST=wificore-postgres
DB_PORT=5432
DB_DATABASE=wms_770_ts
DB_USERNAME=admin
DB_PASSWORD=secret

# PostgreSQL Performance Settings
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_MAINTENANCE_WORK_MEM=64MB

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_CLIENT=phpredis
REDIS_HOST=wificore-redis
REDIS_PORT=6379
REDIS_PASSWORD=RedisTS2026SecurePass
REDIS_MAXMEMORY=512mb

MEMCACHED_HOST=127.0.0.1

# ============================================================================
# PUSHER/SOKETI WEBSOCKET CONFIGURATION
# ============================================================================
PUSHER_APP_ID=app-id
PUSHER_APP_KEY=app-key
PUSHER_APP_SECRET=app-secret
PUSHER_HOST=wificore-soketi
PUSHER_PORT=6071
PUSHER_SCHEME=http
PUSHER_APP_CLUSTER=mt1

# Soketi Settings
SOKETI_DEBUG=true
SOKETI_STATUS_ENDPOINT=http://wificore-soketi:6071/apps/app-id/status
SOKETI_METRICS_ENABLED=1

# ============================================================================
# FREERADIUS CONFIGURATION
# ============================================================================
RADIUS_SERVER_HOST=wificore-freeradius
RADIUS_SERVER_PORT=1812
RADIUS_SECRET=testing123
RADIUS_AUTH_PORT=1812
RADIUS_ACCT_PORT=1813

# ============================================================================
# SESSION & SECURITY
# ============================================================================
SESSION_DRIVER=redis
SESSION_LIFETIME=43200
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=.traidsolutions.com

SANCTUM_STATEFUL_DOMAINS=wificore.traidsolutions.com,*.traidsolutions.com
SANCTUM_TOKEN_EXPIRATION=43200

# ============================================================================
# CACHE CONFIGURATION
# ============================================================================
FILESYSTEM_DISK=local

CACHE_STORE=redis
CACHE_PREFIX=traidnet_cache_

# Broadcasting
BROADCAST_DRIVER=pusher
BROADCAST_CONNECTION=pusher

# Queue Configuration (for broadcasting events)
QUEUE_CONNECTION=database
QUEUE_MAX_TRIES=3
QUEUE_TIMEOUT=120
QUEUE_RETRY_AFTER=90
QUEUE_BACKOFF=10,30,60

# ============================================================================
# MULTITENANCY CONFIGURATION
# ============================================================================
MULTITENANCY_MODE=schema
AUTO_CREATE_TENANT_SCHEMA=true
AUTO_MIGRATE_TENANT_SCHEMA=true

# ============================================================================
# DATABASE MIGRATION SETTINGS
# ============================================================================
AUTO_MIGRATE=true
AUTO_SEED=false
FRESH_INSTALL=false

# ============================================================================
# VPN CONFIGURATION
# ============================================================================
VPN_MODE=host
VPN_INTERFACE_NAME=wg0
VPN_SERVER_PUBLIC_IP=144.91.71.208
VPN_SERVER_ENDPOINT=144.91.71.208:51830
VPN_LISTEN_PORT=51830
VPN_SERVER_PRIVATE_KEY=6KjcDY1WKZBhuMLP26mOhPYh+d9RJsXw/L8UMKwDEVc=
VPN_SERVER_PUBLIC_KEY=4VWYMDDs7RdPyi+69Qmle1+7sTLhBHhxWwaxnZVaymA=
VPN_SUBNET_BASE=10.0.0.0/8

# ============================================================================
# MAIL CONFIGURATION
# ============================================================================
MAIL_MAILER=smtp
MAIL_ENCRYPTION=tls
MAIL_PORT=587
MAIL_TIMEOUT=30
MAIL_FROM_ADDRESS=noreply@traidsolutions.com
MAIL_FROM_NAME="TraidSolutions (TraidLink)"

# ============================================================================
# SMTP PROVIDER CONFIGURATION
# ============================================================================
# Uncomment ONE provider below and comment out the others
# Current Active Provider: Brevo

# Brevo (Sendinblue) - ACTIVE
MAIL_HOST=smtp-relay.brevo.com
MAIL_USERNAME=9eb281001@smtp-brevo.com
MAIL_PASSWORD=Dq0pMAVZTSdznfKy

# SendGrid
#MAIL_HOST=smtp.sendgrid.net
#MAIL_USERNAME=apikey
#MAIL_PASSWORD=your-sendgrid-api-key

# Mailjet
#MAIL_HOST=in-v3.mailjet.com
#MAIL_USERNAME=your-mailjet-api-key
#MAIL_PASSWORD=your-mailjet-secret-key

# SendPulse
#MAIL_HOST=smtp-pulse.com
#MAIL_USERNAME=your-sendpulse-email
#MAIL_PASSWORD=your-sendpulse-password

# MailerSend (Trial limit reached - use alternative provider)
#MAIL_HOST=smtp.mailersend.net
#MAIL_USERNAME=MS_lMZuaN@traidsolutions.com
#MAIL_PASSWORD=mssp.Nvs3Crz.351ndgw3jpq4zqx8.fhCSv8o
MAILERSEND_API_KEY=mlsn.fe43a84418a177d89b165af0092740fa4e28a0e2acb2a1e1c9df248a458910ca

# SMTP2GO
#MAIL_HOST=mail.smtp2go.com
#MAIL_USERNAME=your-smtp2go-username
#MAIL_PASSWORD=your-smtp2go-password

# Maileroo
#MAIL_HOST=smtp.maileroo.com
#MAIL_USERNAME=your-maileroo-username
#MAIL_PASSWORD=your-maileroo-api-key

# ============================================================================
# AWS CONFIGURATION
# ============================================================================
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# ============================================================================
# VITE CONFIGURATION
# ============================================================================
VITE_APP_NAME="${APP_NAME}"

# ============================================================================
# MIKROTIK CONFIGURATION
# ============================================================================
MIKROTIK_HOST=192.168.9.3
MIKROTIK_USER=admin
MIKROTIK_PASS=admin

# ============================================================================
# M-PESA CONFIGURATION
# ============================================================================
MPESA_ENV=sandbox
MPESA_BASE_URL=https://sandbox.safaricom.co.ke
MPESA_CONSUMER_KEY=7GvWaAPmphNAfDf8oYffGJFCXoCDEePXD7cu9yA4amqdO2fB
MPESA_CONSUMER_SECRET=c2leGx3IZILGawG4mUqANUX9w5lbyvvSjXSiMQEt0ZB4jrbfpsogs8ELxBk5dQRP
MPESA_BUSINESS_SHORTCODE=174379
MPESA_PASSKEY=bfb279f9aa9bdbcf158e97dd71a467cd2e0c893059b10f78e6b72ada1ed2c919
MPESA_CALLBACK_URL=https://hotspot.traidnet.co.ke/api/mpesa/callback
MPESA_INITIATOR_NAME=testapi
MPESA_INITIATOR_PASSWORD=Safaricom123!!
MPESA_ACCOUNT_REFERENCE=TraidNet
MPESA_TRANSACTION_DESC=Test

# ============================================================================
# DOCKER TAGS
# ============================================================================
NGINX_TAG=latest
FRONTEND_TAG=latest
BACKEND_TAG=latest

# ============================================================================
# BROADCASTING CONNECTION
# ============================================================================
BROADCAST_CONNECTION=soketi

# ============================================================================
# BYPASS EMAIL VERIFICATION (Development only)
# ============================================================================
BYPASS_EMAIL_VERIFICATION=false

# ============================================================================
# LOGGING
# ============================================================================
LOG_CHANNEL=stack
LOG_STACK=single
LOG_LEVEL=debug
LOG_DEPRECATIONS_CHANNEL=null

# ============================================================================
# EXTERNAL PORTS (Only services that need external access)
# ============================================================================
NGINX_PORT=8070
# RADIUS ports for network devices (APs, routers)
RADIUS_AUTH_PORT=1812
RADIUS_ACCT_PORT=1813

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================
# PHP-FPM
PHP_FPM_PM_MAX_CHILDREN=50
PHP_FPM_PM_START_SERVERS=10
PHP_FPM_PM_MIN_SPARE_SERVERS=5
PHP_FPM_PM_MAX_SPARE_SERVERS=20

# Queue Workers
QUEUE_WORKERS=10

# ============================================================================
# API RATE LIMITING
# ============================================================================
API_RATE_LIMIT=60
API_RATE_LIMIT_WINDOW=1

# ============================================================================
# WIREGUARD CONTROLLER CONFIGURATION
# ============================================================================
# SECURITY: Generate a strong API key for WireGuard controller
# Generate: openssl rand -base64 32
# Note: Using Docker bridge gateway IP (172.17.0.1) because WireGuard runs in host network mode
WIREGUARD_API_KEY=4UePE4CaTdYn/iiND5EEQZL0U4nHqhHp54jNUSbHWPg=
WIREGUARD_CONTROLLER_URL=http://172.17.0.1:8080

# ============================================================================
# QUEUE CONFIGURATION (Phase 1 Optimization)
# ============================================================================
QUEUE_CONNECTION=redis
REDIS_QUEUE_CONNECTION=default
REDIS_QUEUE=default
REDIS_QUEUE_RETRY_AFTER=90

# ============================================================================
# MONITORING CONFIGURATION
# ============================================================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=Admin@123
PROMETHEUS_RETENTION_DAYS=30

# ============================================================================
# DATABASE CONNECTION POOLING (PgBouncer)
# ============================================================================
# IMPORTANT: Uncomment these to use PgBouncer connection pooler
# This is CRITICAL for scaling beyond 100 tenants
# DB_HOST=wificore-pgbouncer
# DB_PORT=6432
